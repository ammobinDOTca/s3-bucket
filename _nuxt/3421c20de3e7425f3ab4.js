(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{213:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));var n=["ammo","centerfire","rimfire","shotgun"],o=[].concat(n,["reloading","powder","shot","case","primer"])},228:function(e,t,r){"use strict";(function(e){r(61),r(62);var n=r(203),o=r(42),l=r(87),c=r(44),d=r(43),v=r(45),m=r(12),f=r(20),h=r(213),y=r(270),_=function(e,t,r,desc){var n,o=arguments.length,l=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(l=(o<3?n(l):o>3?n(t,r,l):n(t,r))||l);return o>3&&l&&Object.defineProperty(t,r,l),l},w=function(t){function m(){var e;return Object(o.a)(this,m),(e=Object(c.a)(this,Object(d.a)(m).apply(this,arguments))).showFilters=!0,e.provinces=[null,"AB","BC","MB","NB","NS","NL","NT","NU","ON","PE","QC","SK","YT"],e.defaultImg=r(128),e.brands=[null].concat(Object(n.a)(y.brands.map((function(e){return e[0]})).sort()),["UNKNOWN"]),e}return Object(v.a)(m,t),Object(l.a)(m,[{key:"itemClicked",value:function(link,e){var t=JSON.stringify({link:link,index:e,href:window.location.href,query:{itemType:this.itemType,subType:this.subType,page:this.page,pageSize:this.pageSize,province:this.province,vendor:this.vendor,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,brand:this.brand},itemType:this.itemType,subType:this.subType,page:this.page});navigator.sendBeacon?navigator.sendBeacon("https://ammobin.ca/api/track-click",t):this.$axios.post("https://ammobin.ca/api/track-click",t)}},{key:"sortBy",value:function(e){var t;t=e===this.sortField&&"DES"===this.sortOrder?"ASC":"DES",this.$emit("update:sortOrder",t),this.$emit("update:sortField",e)}},{key:"updateBrand",value:function(e){this.$emit("update:brand",e)}},{key:"updatePage",value:function(t){this.$emit("update:page",t),e((function(){return window.scroll(0,0)}))}},{key:"updatePageSize",value:function(e){this.$emit("update:pageSize",parseInt(e))}},{key:"updateProvince",value:function(e){this.$emit("update:province",e||null)}},{key:"updateVendor",value:function(e){this.$emit("update:vendor",e)}},{key:"updateQuery",value:function(e){this.$emit("update:query",e)}},{key:"toggleFilters",value:function(){this.showFilters=!this.showFilters}},{key:"isAmmoType",get:function(){return h.a.includes(this.itemType)}}]),m}(f.c);_([Object(f.b)()],w.prototype,"rows",void 0),_([Object(f.b)()],w.prototype,"pages",void 0),_([Object(f.b)()],w.prototype,"itemType",void 0),_([Object(f.b)()],w.prototype,"vendors",void 0),_([Object(f.b)()],w.prototype,"loading",void 0),_([Object(f.b)()],w.prototype,"page",void 0),_([Object(f.b)()],w.prototype,"subType",void 0),_([Object(f.b)()],w.prototype,"pageSize",void 0),_([Object(f.b)()],w.prototype,"province",void 0),_([Object(f.b)()],w.prototype,"vendor",void 0),_([Object(f.b)()],w.prototype,"query",void 0),_([Object(f.b)()],w.prototype,"sortField",void 0),_([Object(f.b)()],w.prototype,"sortOrder",void 0),_([Object(f.b)()],w.prototype,"brand",void 0),w=_([Object(f.a)({mounted:function(){this.showFilters=window.outerWidth>=759}})],w),t.a=w}).call(this,r(88).setImmediate)},232:function(e,t,r){},233:function(e,t,r){},265:function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=265},377:function(e,t,r){"use strict";var n=r(232);r.n(n).a},378:function(e,t,r){"use strict";var n=r(233);r.n(n).a},380:function(e,t,r){"use strict";r.r(t);r(19),r(15),r(46);var n=r(40),o=(r(61),r(62),r(24),r(42)),l=r(87),c=r(44),d=r(43),v=r(45),m=r(4),f=r(12),h=r(228).a,y=(r(377),r(23)),_=Object(y.a)(h,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[r("div",{staticClass:"pure-form pure-form-stacked"},[r("div",{staticClass:"pure-g"},[r("div",{staticClass:"pure-u-1 pure-u-md-1-3",attrs:{id:"search"}},[r("label",{attrs:{for:"query"}},[e._v(e._s(e.$t("table.search")))]),e._v(" "),r("input",{staticClass:"pure-input-1",attrs:{id:"query",placeholder:"ie: Barnaul, surplus, 00 Buck",disabled:e.loading},domProps:{value:e.query},on:{change:function(t){return e.updateQuery(t.target.value)}}})]),e._v(" "),r("div",{staticClass:"pure-u-1 show-on-mobile"},[r("div",{staticClass:"active pure-button button-xsmall",on:{click:function(t){return e.toggleFilters()}}},[e._v("\n          "+e._s(e.$t(e.showFilters?"table.hideFilters":"table.showFilters"))+"\n          "),r("span",{staticClass:"arrow",class:{DES:!e.showFilters,ASC:e.showFilters}})])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.showFilters,expression:"showFilters"}],staticClass:"pure-u-1 pure-u-md-2-3"},[r("div",{staticClass:"pure-u-1 pure-u-md-1-4"},[r("label",{attrs:{for:"province"}},[e._v(e._s(e.$t("table.province")))]),e._v(" "),r("select",{staticClass:"pure-input-1",attrs:{id:"province",disabled:e.loading},domProps:{value:e.province},on:{change:function(t){return e.updateProvince(t.target.value)}}},e._l(e.provinces,(function(t){return r("option",{key:t},[e._v(e._s(t))])})),0)]),e._v(" "),r("div",{staticClass:"pure-u-1 pure-u-md-1-3"},[r("label",{attrs:{for:"vendor"}},[e._v(e._s(e.$t("table.vendor")))]),e._v(" "),r("select",{staticClass:"pure-input-1",attrs:{id:"vendor",disabled:e.loading},domProps:{value:e.vendor},on:{change:function(t){return e.updateVendor(t.target.value)}}},e._l(e.vendors,(function(t){return r("option",{key:t},[e._v(e._s(t))])})),0)]),e._v(" "),r("div",{staticClass:"pure-u-1 pure-u-md-1-3 capitalize"},[r("label",{attrs:{for:"brand"}},[e._v(e._s(e.$t("table.brand")))]),e._v(" "),r("select",{staticClass:"pure-input-1",attrs:{id:"brand",disabled:e.loading},domProps:{value:e.brand},on:{change:function(t){return e.updateBrand(t.target.value)}}},e._l(e.brands,(function(t){return r("option",{key:t,staticClass:"capitalize"},[e._v(e._s(t))])})),0)])])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.pages>0,expression:"pages > 0"}],staticClass:"pure-u-1 pure-u-md-1-3"},[r("label",[e._v(e._s(e.$t("table.page")))]),e._v(" "),r("div",[r("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:e.page<=1||e.loading},on:{click:function(t){return e.updatePage(1)}}},[e._v("|<<")]),e._v(" "),r("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:e.page<=1||e.loading},on:{click:function(t){return e.updatePage(e.page-1)}}},[e._v("\n          <\n        ")]),e._v("\n        "+e._s(e.page)+" "+e._s(e.$t("table.of"))+" "+e._s(e.pages)+"\n        "),r("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:e.page>=e.pages||e.loading},on:{click:function(t){return e.updatePage(e.page+1)}}},[e._v("\n          >\n        ")]),e._v(" "),r("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:e.page>=e.pages||e.loading},on:{click:function(t){return e.updatePage(e.pages)}}},[e._v("\n          >>|\n        ")])])])]),e._v(" "),r("div",{staticClass:"pure-g row"},[r("div",{staticClass:"pure-u-lg-1-5 pure-u-1"}),e._v(" "),r("div",{staticClass:"pure-u-lg-1-5 pure-u-md-1-3 pure-u-1-4 title",class:{active:"name"==e.sortField},attrs:{disabled:e.loading},on:{click:function(t){return e.sortBy("name")}}},[r("h4",[e._v("\n        "+e._s(e.$t("table.name"))+"\n        "),r("span",{staticClass:"arrow",class:e.sortOrder})])]),e._v(" "),r("div",{staticClass:"pure-u-lg-1-5 pure-u-md-1-3 pure-u-1-4 title",class:{active:"price"==e.sortField},attrs:{disabled:e.loading},on:{click:function(t){return e.sortBy("price")}}},[r("h4",[e._v("\n        "+e._s(e.$t("table.price"))+"\n        "),r("span",{staticClass:"arrow",class:e.sortOrder})])]),e._v(" "),r("div",{staticClass:"pure-u-lg-1-5 pure-u-1-4 title",class:{active:"unitCost"==e.sortField},attrs:{disabled:e.loading},on:{click:function(t){return e.sortBy("unitCost")}}},[r("h4",[e._v("\n        "+e._s(e.$t("table.unitCost"))+"\n        "),r("span",{staticClass:"arrow",class:e.sortOrder})])]),e._v(" "),r("div",{staticClass:"pure-u-lg-1-5 pure-u-1-4 title",class:{active:"link"==e.sortField},attrs:{disabled:e.loading},on:{click:function(t){return e.sortBy("link")}}},[r("h4",[e._v("\n        "+e._s(e.$t("table.link"))+"\n        "),r("span",{staticClass:"arrow",class:e.sortOrder})])])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!(e.loading||e.rows&&0!==e.rows.length),expression:"!loading && (!rows || rows.length === 0)"}],staticClass:"pure-g row fix-row"},[r("div",{staticClass:"pure-u-1"},[e._v(e._s(e.$t("table.noResult")))])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"pure-g row fix-row"},[r("div",{staticClass:"pure-u-1"},[e._v(e._s(e.$t("default.loading"))+"...")])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}]},e._l(e.rows,(function(t,n){return r("div",{key:t.link+n,staticClass:"pure-g row fix-row item"},[r("div",{staticClass:"pure-u-lg-1-5 pure-u-md-1 pure-u-1"},[r("img",{directives:[{name:"img-fallback",rawName:"v-img-fallback",value:e.defaultImg,expression:"defaultImg"}],staticClass:"pure-img img-cell",attrs:{src:t.img||e.defaultImg,alt:t.name,decoding:"async",importance:"low"}})]),e._v(" "),r("div",{staticClass:"pure-u-lg-1-5 pure-u-md-1-4 pure-u-1 m-b-1 capitalize"},[e._v(e._s(t.name))]),e._v(" "),r("div",{staticClass:"pure-u-lg-1-5 pure-u-md-1-4 pure-u-1 m-b-1"},[r("div",[e._v("$"+e._s(t.price.toFixed(2)))])]),e._v(" "),r("div",{staticClass:"pure-u-lg-1-5 pure-u-md-1-4 pure-u-1 m-b-1"},[t.unitCost?r("div",[e._v("$"+e._s(t.unitCost.toFixed(2)))]):r("div",{attrs:{if:"!row.minUnitCost"}},[e._v("N/A")])]),e._v(" "),r("div",{staticClass:"pure-u-lg-1-5 pure-u-md-1-4 pure-u-1 m-b-1"},[r("a",{attrs:{href:t.link,target:"_blank",rel:"nofollow noopener"},on:{click:function(r){return e.itemClicked(t.link,n)}}},[e._v(e._s(e.$t("table.buyFrom"))+" "+e._s(t.vendor))])])])})),0),e._v(" "),r("div",[r("div",{directives:[{name:"show",rawName:"v-show",value:e.pages>0,expression:"pages > 0"}],staticClass:"pure-u-lg-1-2 pure-u-1"},[r("div",[e._v(e._s(e.$t("table.page")))]),e._v(" "),r("div",[r("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:1===e.page||e.loading},on:{click:function(t){return e.updatePage(1)}}},[e._v("\n          |<<\n        ")]),e._v(" "),r("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:1===e.page||e.loading},on:{click:function(t){return e.updatePage(e.page-1)}}},[e._v("\n          <\n        ")]),e._v("\n        "+e._s(e.page)+" "+e._s(e.$t("table.of"))+" "+e._s(e.pages)+"\n        "),r("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:e.page===e.pages||e.loading},on:{click:function(t){return e.updatePage(e.page+1)}}},[e._v("\n          >\n        ")]),e._v(" "),r("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:e.page===e.pages||e.loading},on:{click:function(t){return e.updatePage(e.pages)}}},[e._v("\n          >>|\n        ")])])])])])}),[],!1,null,null,null).exports,w=r(89),O=r(213),C=(r(199),r(20)),$=function(e,t,r,desc){var n,o=arguments.length,l=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(l=(o<3?n(l):o>3?n(t,r,l):n(t,r))||l);return o>3&&l&&Object.defineProperty(t,r,l),l};function k(e,t){return F.apply(this,arguments)}function F(){return(F=Object(m.a)(regeneratorRuntime.mark((function e(t,r){var n,o,l,c,d,v,m,f,h,y,_,w,O,C,$,k,F,T,j,x,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.itemType,o=r.subType,l=r.page,c=void 0===l?1:l,d=r.pageSize,v=void 0===d?25:d,m=r.brand,f=void 0===m?null:m,h=r.province,y=void 0===h?null:h,_=r.vendor,w=void 0===_?null:_,O=r.query,C=void 0===O?null:O,$=r.sortField,k=void 0===$?null:$,F=r.sortOrder,T=void 0===F?null:F,e.next=3,t.post("https://ammobin.ca/api/graphql",[{opName:"getItemsFlatListings",query:"\n      query getItemsFlatListings(\n          $page: Int\n          $pageSize: Int\n          $itemType: ItemType\n          $subType: String\n          $province: Province\n          $vendor: String\n          $query: String\n          $sortField: FlatSortField\n          $sortOrder: SortOrder,\n          $brand: String\n        ) {\n          itemsFlatListings(\n            page: $page\n            pageSize: $pageSize\n            itemType: $itemType\n            subType: $subType\n            province: $province\n            vendor: $vendor\n            sortField: $sortField\n            query: $query\n            sortOrder: $sortOrder\n            brand: $brand\n          ) {\n            pages\n            items {\n              name\n              brand\n              img\n              price\n              link\n              unitCost\n              vendor\n            }\n          }\n        }\n      ",variables:{itemType:n,subType:o,page:c,pageSize:v,brand:f,province:y,vendor:w,query:C,sortField:k,sortOrder:T}}]);case 3:return j=e.sent,x=j.data[0].data,S=x.itemsFlatListings,x.errors,e.abrupt("return",S);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T,j=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).apply(this,arguments))).error=null,e.itemsFlatListings=null,e.loading=!1,e.page=1,e.province=null,e.pageSize=25,e.vendor=null,e.query=null,e.sortOrder="ASC",e.sortField="unitCost",e.brand=null,e}var r;return Object(v.a)(t,e),Object(l.a)(t,[{key:"onQueryChange",value:(r=Object(m.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$nuxt.$loading.start(),e.prev=1,this.loading=!0,e.next=5,k(this.$axios,this);case 5:this.itemsFlatListings=e.sent,this.page>this.itemsFlatListings.pages&&(this.page=this.itemsFlatListings.pages||1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),this.error=e.t0;case 12:this.loading=!1,this.$nuxt.$loading.finish();case 14:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(e){return r.apply(this,arguments)})},{key:"area",get:function(){return this.province||"Canada"}},{key:"isAmmoType",get:function(){return O.a.includes(this.itemType)}},{key:"subType",get:function(){return this.$route.params.subType}},{key:"itemType",get:function(){return this.$route.params.itemType}}]),t}(C.c);$([Object(C.d)("page"),Object(C.d)("province"),Object(C.d)("pageSize"),Object(C.d)("vendor"),Object(C.d)("query"),Object(C.d)("sortOrder"),Object(C.d)("sortField"),Object(C.d)("brand")],j.prototype,"onQueryChange",null);var x=j=$([Object(C.a)({validate:function(e){var t=e.params;return O.b.includes(t.itemType)},asyncData:(T=Object(m.a)(regeneratorRuntime.mark((function e(t){var r,o,l,c,d,v,m,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$axios,o=t.route.params,l=o.itemType,c=o.subType,e.next=3,Promise.all([k(r,{itemType:l,subType:c}),r.post("https://ammobin.ca/api/graphql",[{query:"{vendors{name}}",opName:"vendors"}]).then((function(e){return e.data[0].data.vendors}))]);case 3:return d=e.sent,v=Object(n.a)(d,2),m=v[0],f=v[1],e.abrupt("return",{vendors:f,itemsFlatListings:m});case 8:case"end":return e.stop()}}),e)}))),function(e){return T.apply(this,arguments)}),components:{FlatList:_},head:function(){var link=[],e="https://ammobin.ca/".concat(this.$i18n.locale,"/").concat(this.itemType,"/").concat(this.subType);this.page>1&&link.push({rel:"prev",href:Object(w.a)(e,this.page-1,this.subType)}),this.itemsFlatListings&&this.itemsFlatListings.pages>this.page&&link.push({rel:"next",href:Object(w.a)(e,this.page+1,this.subType)});var area=this.area,t=this.subType;return{title:this.$t("subType.title",{area:area,subType:t})+" | ammobin.ca",meta:[{hid:"description",name:"description",content:this.$t("subType.description",{area:area,subType:t})}],link:link}}})],j),S=(r(378),Object(y.a)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[e.isAmmoType?e._e():r("div",[e._v(e._s(e.$t("default.betaWarning")))]),e._v(" "),r("h1",[e._v(e._s(e.$t("subType.title",{area:e.area,subType:e.subType})))]),e._v(" "),r("flat-list",{directives:[{name:"show",rawName:"v-show",value:!e.error,expression:"!error"}],attrs:{rows:e.itemsFlatListings?e.itemsFlatListings.items:[],pages:e.itemsFlatListings?e.itemsFlatListings.pages:0,"item-type":e.itemType,subType:e.subType,vendors:[null].concat((e.vendors||[]).map((function(i){return i.name}))),loading:!e.itemsFlatListings||e.loading,page:e.page,pageSize:e.pageSize,province:e.province,vendor:e.vendor,query:e.query,sortField:e.sortField,sortOrder:e.sortOrder,brand:e.brand},on:{"update:page":function(t){e.page=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:province":function(t){e.province=t},"update:vendor":function(t){e.vendor=t},"update:query":function(t){e.query=t},"update:sortField":function(t){e.sortField=t},"update:sort-field":function(t){e.sortField=t},"update:sortOrder":function(t){e.sortOrder=t},"update:sort-order":function(t){e.sortOrder=t},"update:brand":function(t){e.brand=t}}}),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}]},[e._v("ERROR "+e._s(e.error))])],1)}),[],!1,null,"51562b0a",null));t.default=S.exports}}]);