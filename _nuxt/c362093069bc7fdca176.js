(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{215:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r=["ammo","centerfire","rimfire","shotgun"],o=[].concat(r,["reloading","powder","shot","case","primer"])},230:function(e,t,n){"use strict";(function(e){n(61),n(62);var r=n(205),o=n(42),l=n(86),c=n(44),d=n(43),v=n(45),m=n(12),f=n(20),h=n(215),y=n(272),_=function(e,t,n,desc){var r,o=arguments.length,l=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(l=(o<3?r(l):o>3?r(t,n,l):r(t,n))||l);return o>3&&l&&Object.defineProperty(t,n,l),l},w=function(t){function m(){var e;return Object(o.a)(this,m),(e=Object(c.a)(this,Object(d.a)(m).apply(this,arguments))).showFilters=!0,e.provinces=[null,"AB","BC","MB","NB","NS","NL","NT","NU","ON","PE","QC","SK","YT"],e.defaultImg=n(128),e.brands=[null].concat(Object(r.a)(y.brands.map((function(e){return e[0]})).sort()),["UNKNOWN"]),e}return Object(v.a)(m,t),Object(l.a)(m,[{key:"itemClicked",value:function(link,e){var t=JSON.stringify({link:link,index:e,href:window.location.href,query:{itemType:this.itemType,subType:this.subType,page:this.page,pageSize:this.pageSize,province:this.province,vendor:this.vendor,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,brand:this.brand},itemType:this.itemType,subType:this.subType,page:this.page});navigator.sendBeacon?navigator.sendBeacon("https://ammobin.ca/api/track-click",t):this.$axios.post("https://ammobin.ca/api/track-click",t)}},{key:"sortBy",value:function(e){var t;t=e===this.sortField&&"DES"===this.sortOrder?"ASC":"DES",this.$emit("update:sortOrder",t),this.$emit("update:sortField",e)}},{key:"updateBrand",value:function(e){this.$emit("update:brand",e)}},{key:"updatePage",value:function(t){this.$emit("update:page",t),e((function(){return window.scroll(0,0)}))}},{key:"updatePageSize",value:function(e){this.$emit("update:pageSize",parseInt(e))}},{key:"updateProvince",value:function(e){this.$emit("update:province",e||null)}},{key:"updateVendor",value:function(e){this.$emit("update:vendor",e)}},{key:"updateQuery",value:function(e){this.$emit("update:query",e)}},{key:"toggleFilters",value:function(){this.showFilters=!this.showFilters}},{key:"isAmmoType",get:function(){return h.a.includes(this.itemType)}}]),m}(f.c);_([Object(f.b)()],w.prototype,"rows",void 0),_([Object(f.b)()],w.prototype,"pages",void 0),_([Object(f.b)()],w.prototype,"itemType",void 0),_([Object(f.b)()],w.prototype,"vendors",void 0),_([Object(f.b)()],w.prototype,"loading",void 0),_([Object(f.b)()],w.prototype,"page",void 0),_([Object(f.b)()],w.prototype,"subType",void 0),_([Object(f.b)()],w.prototype,"pageSize",void 0),_([Object(f.b)()],w.prototype,"province",void 0),_([Object(f.b)()],w.prototype,"vendor",void 0),_([Object(f.b)()],w.prototype,"query",void 0),_([Object(f.b)()],w.prototype,"sortField",void 0),_([Object(f.b)()],w.prototype,"sortOrder",void 0),_([Object(f.b)()],w.prototype,"brand",void 0),w=_([Object(f.a)({mounted:function(){this.showFilters=window.outerWidth>=759}})],w),t.a=w}).call(this,n(87).setImmediate)},234:function(e,t,n){},235:function(e,t,n){},267:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=267},379:function(e,t,n){"use strict";var r=n(234);n.n(r).a},380:function(e,t,n){"use strict";var r=n(235);n.n(r).a},382:function(e,t,n){"use strict";n.r(t);n(19),n(15),n(46);var r=n(40),o=(n(61),n(62),n(24),n(42)),l=n(86),c=n(44),d=n(43),v=n(45),m=n(4),f=n(12),h=n(230).a,y=(n(379),n(23)),_=Object(y.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[n("div",{staticClass:"pure-form pure-form-stacked"},[n("div",{staticClass:"pure-g"},[n("div",{staticClass:"pure-u-1 pure-u-md-1-3",attrs:{id:"search"}},[n("label",{attrs:{for:"query"}},[e._v(e._s(e.$t("table.search")))]),e._v(" "),n("input",{staticClass:"pure-input-1",attrs:{id:"query",placeholder:"ie: Barnaul, surplus, 00 Buck",disabled:e.loading},domProps:{value:e.query},on:{change:function(t){return e.updateQuery(t.target.value)}}})]),e._v(" "),n("div",{staticClass:"pure-u-1 show-on-mobile"},[n("div",{staticClass:"active pure-button button-xsmall",on:{click:function(t){return e.toggleFilters()}}},[e._v("\n          "+e._s(e.$t(e.showFilters?"table.hideFilters":"table.showFilters"))+"\n          "),n("span",{staticClass:"arrow",class:{DES:!e.showFilters,ASC:e.showFilters}})])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showFilters,expression:"showFilters"}],staticClass:"pure-u-1 pure-u-md-2-3"},[n("div",{staticClass:"pure-u-1 pure-u-md-1-4"},[n("label",{attrs:{for:"province"}},[e._v(e._s(e.$t("table.province")))]),e._v(" "),n("select",{staticClass:"pure-input-1",attrs:{id:"province",disabled:e.loading},domProps:{value:e.province},on:{change:function(t){return e.updateProvince(t.target.value)}}},e._l(e.provinces,(function(t){return n("option",{key:t},[e._v(e._s(t))])})),0)]),e._v(" "),n("div",{staticClass:"pure-u-1 pure-u-md-1-3"},[n("label",{attrs:{for:"vendor"}},[e._v(e._s(e.$t("table.vendor")))]),e._v(" "),n("select",{staticClass:"pure-input-1",attrs:{id:"vendor",disabled:e.loading},domProps:{value:e.vendor},on:{change:function(t){return e.updateVendor(t.target.value)}}},e._l(e.vendors,(function(t){return n("option",{key:t},[e._v(e._s(t))])})),0)]),e._v(" "),n("div",{staticClass:"pure-u-1 pure-u-md-1-3 capitalize"},[n("label",{attrs:{for:"brand"}},[e._v(e._s(e.$t("table.brand")))]),e._v(" "),n("select",{staticClass:"pure-input-1",attrs:{id:"brand",disabled:e.loading},domProps:{value:e.brand},on:{change:function(t){return e.updateBrand(t.target.value)}}},e._l(e.brands,(function(t){return n("option",{key:t,staticClass:"capitalize"},[e._v(e._s(t))])})),0)])])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.pages>0,expression:"pages > 0"}],staticClass:"pure-u-1 pure-u-md-1-3"},[n("label",[e._v(e._s(e.$t("table.page")))]),e._v(" "),n("div",[n("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:e.page<=1||e.loading},on:{click:function(t){return e.updatePage(1)}}},[e._v("|<<")]),e._v(" "),n("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:e.page<=1||e.loading},on:{click:function(t){return e.updatePage(e.page-1)}}},[e._v("\n          <\n        ")]),e._v("\n        "+e._s(e.page)+" "+e._s(e.$t("table.of"))+" "+e._s(e.pages)+"\n        "),n("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:e.page>=e.pages||e.loading},on:{click:function(t){return e.updatePage(e.page+1)}}},[e._v("\n          >\n        ")]),e._v(" "),n("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:e.page>=e.pages||e.loading},on:{click:function(t){return e.updatePage(e.pages)}}},[e._v("\n          >>|\n        ")])])])]),e._v(" "),n("div",{staticClass:"pure-g row"},[n("div",{staticClass:"pure-u-lg-1-5 pure-u-1"}),e._v(" "),n("div",{staticClass:"pure-u-lg-1-5 pure-u-md-1-3 pure-u-1-4 title",class:{active:"name"==e.sortField},attrs:{disabled:e.loading},on:{click:function(t){return e.sortBy("name")}}},[n("h4",[e._v("\n        "+e._s(e.$t("table.name"))+"\n        "),n("span",{staticClass:"arrow",class:e.sortOrder})])]),e._v(" "),n("div",{staticClass:"pure-u-lg-1-5 pure-u-md-1-3 pure-u-1-4 title",class:{active:"price"==e.sortField},attrs:{disabled:e.loading},on:{click:function(t){return e.sortBy("price")}}},[n("h4",[e._v("\n        "+e._s(e.$t("table.price"))+"\n        "),n("span",{staticClass:"arrow",class:e.sortOrder})])]),e._v(" "),n("div",{staticClass:"pure-u-lg-1-5 pure-u-1-4 title",class:{active:"unitCost"==e.sortField},attrs:{disabled:e.loading},on:{click:function(t){return e.sortBy("unitCost")}}},[n("h4",[e._v("\n        "+e._s(e.$t("table.unitCost"))+"\n        "),n("span",{staticClass:"arrow",class:e.sortOrder})])]),e._v(" "),n("div",{staticClass:"pure-u-lg-1-5 pure-u-1-4 title",class:{active:"link"==e.sortField},attrs:{disabled:e.loading},on:{click:function(t){return e.sortBy("link")}}},[n("h4",[e._v("\n        "+e._s(e.$t("table.link"))+"\n        "),n("span",{staticClass:"arrow",class:e.sortOrder})])])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!(e.loading||e.rows&&0!==e.rows.length),expression:"!loading && (!rows || rows.length === 0)"}],staticClass:"pure-g row fix-row"},[n("div",{staticClass:"pure-u-1"},[e._v(e._s(e.$t("table.noResult")))])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"pure-g row fix-row"},[n("div",{staticClass:"pure-u-1"},[e._v(e._s(e.$t("default.loading"))+"...")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}]},e._l(e.rows,(function(t,r){return n("div",{key:t.link+r,staticClass:"pure-g row fix-row item"},[n("div",{staticClass:"pure-u-lg-1-5 pure-u-md-1 pure-u-1"},[n("img",{directives:[{name:"img-fallback",rawName:"v-img-fallback",value:e.defaultImg,expression:"defaultImg"}],staticClass:"pure-img img-cell",attrs:{src:t.img||e.defaultImg,alt:t.name,decoding:"async",importance:"low"}})]),e._v(" "),n("div",{staticClass:"pure-u-lg-1-5 pure-u-md-1-4 pure-u-1 m-b-1 capitalize"},[e._v(e._s(t.name))]),e._v(" "),n("div",{staticClass:"pure-u-lg-1-5 pure-u-md-1-4 pure-u-1 m-b-1"},[n("div",[e._v("$"+e._s(t.price.toFixed(2)))])]),e._v(" "),n("div",{staticClass:"pure-u-lg-1-5 pure-u-md-1-4 pure-u-1 m-b-1"},[t.unitCost?n("div",[e._v("$"+e._s(t.unitCost.toFixed(2)))]):n("div",{attrs:{if:"!row.minUnitCost"}},[e._v("N/A")])]),e._v(" "),n("div",{staticClass:"pure-u-lg-1-5 pure-u-md-1-4 pure-u-1 m-b-1"},[n("a",{attrs:{href:t.link,target:"_blank",rel:"nofollow noopener"},on:{click:function(n){return e.itemClicked(t.link,r)}}},[e._v(e._s(e.$t("table.buyFrom"))+" "+e._s(t.vendor))])])])})),0),e._v(" "),n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.pages>0,expression:"pages > 0"}],staticClass:"pure-u-lg-1-2 pure-u-1"},[n("div",[e._v(e._s(e.$t("table.page")))]),e._v(" "),n("div",[n("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:1===e.page||e.loading},on:{click:function(t){return e.updatePage(1)}}},[e._v("\n          |<<\n        ")]),e._v(" "),n("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:1===e.page||e.loading},on:{click:function(t){return e.updatePage(e.page-1)}}},[e._v("\n          <\n        ")]),e._v("\n        "+e._s(e.page)+" "+e._s(e.$t("table.of"))+" "+e._s(e.pages)+"\n        "),n("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:e.page===e.pages||e.loading},on:{click:function(t){return e.updatePage(e.page+1)}}},[e._v("\n          >\n        ")]),e._v(" "),n("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:e.page===e.pages||e.loading},on:{click:function(t){return e.updatePage(e.pages)}}},[e._v("\n          >>|\n        ")])])])])])}),[],!1,null,null,null).exports,w=n(88),O=n(215),C=(n(201),n(20)),k=function(e,t,n,desc){var r,o=arguments.length,l=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(l=(o<3?r(l):o>3?r(t,n,l):r(t,n))||l);return o>3&&l&&Object.defineProperty(t,n,l),l};function j(e,t){return F.apply(this,arguments)}function F(){return(F=Object(m.a)(regeneratorRuntime.mark((function e(t,n){var r,o,l,c,d,v,m,f,h,y,_,w,O,C,k,j,F,T,$,x,N;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T=function(s){return s?'"'+s+'"':"null"},r=n.itemType,o=n.subType,l=n.page,c=void 0===l?1:l,d=n.pageSize,void 0===d?25:d,v=n.brand,m=void 0===v?null:v,f=n.province,h=void 0===f?null:f,y=n.vendor,_=void 0===y?null:y,w=n.query,O=void 0===w?null:w,C=n.sortField,k=void 0===C?"unitCost":C,j=n.sortOrder,F=void 0===j?"ASC":j,e.next=4,t.get("https://ammobin.ca/api/graphql",{params:{query:"{\nitemsFlatListings(\n page: ".concat(c,"\n itemType: ").concat(r,'\n subType: "').concat(o,'"\n brand:').concat(T(m),"\n province:").concat(h,"\n vendor:").concat(T(_),"\n query:").concat(T(O),"\n sortField:").concat(k,"\n sortOrder:").concat(F,"\n) {\n pages\n items {\n  name\n  brand\n  img\n  price\n  link\n  unitCost\n  vendor\n  }\n }\n}"),opName:"getItemsFlatListings"}});case 4:return $=e.sent,x=$.data.data,N=x.itemsFlatListings,x.errors,e.abrupt("return",N);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var T,$=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).apply(this,arguments))).error=null,e.itemsFlatListings=null,e.loading=!1,e.page=1,e.province=null,e.pageSize=25,e.vendor=null,e.query=null,e.sortOrder="ASC",e.sortField="unitCost",e.brand=null,e}var n;return Object(v.a)(t,e),Object(l.a)(t,[{key:"onQueryChange",value:(n=Object(m.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$nuxt.$loading.start(),e.prev=1,this.loading=!0,e.next=5,j(this.$axios,this);case 5:this.itemsFlatListings=e.sent,this.page>this.itemsFlatListings.pages&&(this.page=this.itemsFlatListings.pages||1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),this.error=e.t0;case 12:this.loading=!1,this.$nuxt.$loading.finish();case 14:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(e){return n.apply(this,arguments)})},{key:"area",get:function(){return this.province||"Canada"}},{key:"isAmmoType",get:function(){return O.a.includes(this.itemType)}},{key:"subType",get:function(){return this.$route.params.subType}},{key:"itemType",get:function(){return this.$route.params.itemType}}]),t}(C.c);k([Object(C.d)("page"),Object(C.d)("province"),Object(C.d)("pageSize"),Object(C.d)("vendor"),Object(C.d)("query"),Object(C.d)("sortOrder"),Object(C.d)("sortField"),Object(C.d)("brand")],$.prototype,"onQueryChange",null);var x=$=k([Object(C.a)({validate:function(e){var t=e.params;return O.b.includes(t.itemType)},asyncData:(T=Object(m.a)(regeneratorRuntime.mark((function e(t){var n,o,l,c,d,v,m,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$axios,o=t.route.params,l=o.itemType,c=o.subType,e.next=3,Promise.all([j(n,{itemType:l,subType:c}),n.post("https://ammobin.ca/api/graphql",[{query:"{vendors{name}}",opName:"vendors"}]).then((function(e){return e.data[0].data.vendors}))]);case 3:return d=e.sent,v=Object(r.a)(d,2),m=v[0],f=v[1],e.abrupt("return",{vendors:f,itemsFlatListings:m});case 8:case"end":return e.stop()}}),e)}))),function(e){return T.apply(this,arguments)}),components:{FlatList:_},head:function(){var link=[],e="https://ammobin.ca/".concat(this.$i18n.locale,"/").concat(this.itemType,"/").concat(this.subType);this.page>1&&link.push({rel:"prev",href:Object(w.a)(e,this.page-1,this.subType)}),this.itemsFlatListings&&this.itemsFlatListings.pages>this.page&&link.push({rel:"next",href:Object(w.a)(e,this.page+1,this.subType)});var area=this.area,t=this.subType;return{title:this.$t("subType.title",{area:area,subType:t})+" | ammobin.ca",meta:[{hid:"description",name:"description",content:this.$t("subType.description",{area:area,subType:t})}],link:link}}})],$),N=(n(380),Object(y.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[e.isAmmoType?e._e():n("div",[e._v(e._s(e.$t("default.betaWarning")))]),e._v(" "),n("h1",[e._v(e._s(e.$t("subType.title",{area:e.area,subType:e.subType})))]),e._v(" "),n("flat-list",{directives:[{name:"show",rawName:"v-show",value:!e.error,expression:"!error"}],attrs:{rows:e.itemsFlatListings?e.itemsFlatListings.items:[],pages:e.itemsFlatListings?e.itemsFlatListings.pages:0,"item-type":e.itemType,subType:e.subType,vendors:[null].concat((e.vendors||[]).map((function(i){return i.name}))),loading:!e.itemsFlatListings||e.loading,page:e.page,pageSize:e.pageSize,province:e.province,vendor:e.vendor,query:e.query,sortField:e.sortField,sortOrder:e.sortOrder,brand:e.brand},on:{"update:page":function(t){e.page=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:province":function(t){e.province=t},"update:vendor":function(t){e.vendor=t},"update:query":function(t){e.query=t},"update:sortField":function(t){e.sortField=t},"update:sort-field":function(t){e.sortField=t},"update:sortOrder":function(t){e.sortOrder=t},"update:sort-order":function(t){e.sortOrder=t},"update:brand":function(t){e.brand=t}}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}]},[e._v("ERROR "+e._s(e.error))])],1)}),[],!1,null,"30ea8ff2",null));t.default=N.exports}}]);