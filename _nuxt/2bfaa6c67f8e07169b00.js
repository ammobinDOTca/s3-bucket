/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{151:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n;const template={dependencies:{"node-fetch":"^2.6.0",unfetch:"^4.1.0",vue:"^2.6.11","vue-client-only":"^2.0.0","vue-meta":"^2.3.1","vue-no-ssr":"^1.1.1","vue-router":"^3.1.3","vue-template-compiler":"^2.6.11",vuex:"^3.1.2"},dir:((n=r(85))&&"object"==typeof n&&"default"in n?n.default:n).join(e,"..","template"),files:["App.js","client.js","index.js","router.js","router.scrollBehavior.js","server.js","utils.js","empty.js","components/nuxt-error.vue","components/nuxt-child.js","components/nuxt-link.server.js","components/nuxt-link.client.js","components/nuxt.js","views/app.template.html","views/error.html"]};t.template=template}).call(this,"/")},155:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));var n=["ammo","centerfire","rimfire","shotgun"],o=[...n,"reloading","powder","shot","case","primer"]},159:function(e,t,r){"use strict";(function(e){var n=r(42),o=r(155),l=function(e,t,r,desc){var n,o=arguments.length,l=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(l=(o<3?n(l):o>3?n(t,r,l):n(t,r))||l);return o>3&&l&&Object.defineProperty(t,r,l),l},d=class extends n.c{constructor(){super(...arguments),this.showFilters=!0,this.provinces=[null,"AB","BC","MB","NB","NS","NL","NT","NU","ON","PE","QC","SK","YT"],this.defaultImg=r(87),this.brands=[]}get isAmmoType(){return o.a.includes(this.itemType)}itemClicked(link,e){var t=JSON.stringify({link:link,index:e,href:window.location.href,query:this.$route.query,itemType:this.itemType,subType:this.subType,page:this.page});navigator.sendBeacon?navigator.sendBeacon("https://ammobin.ca/api/track-click",t):this.$axios.post("https://ammobin.ca/api/track-click",t)}sortBy(e){var t;t=e===this.sortField&&"DES"===this.sortOrder?"ASC":"DES",this.$emit("update:sortOrder",t),this.$emit("update:sortField",e)}updateBrand(e){this.$emit("update:brand",e)}updatePage(t){this.$emit("update:page",t),e(()=>window.scroll(0,0))}updatePageSize(e){this.$emit("update:pageSize",parseInt(e))}updateProvince(e){this.$emit("update:province",e||null)}updateVendor(e){this.$emit("update:vendor",e)}updateQuery(e){this.$emit("update:query",e)}toggleFilters(){this.showFilters=!this.showFilters}};l([Object(n.b)()],d.prototype,"rows",void 0),l([Object(n.b)()],d.prototype,"pages",void 0),l([Object(n.b)()],d.prototype,"itemType",void 0),l([Object(n.b)()],d.prototype,"vendors",void 0),l([Object(n.b)()],d.prototype,"loading",void 0),l([Object(n.b)()],d.prototype,"page",void 0),l([Object(n.b)()],d.prototype,"subType",void 0),l([Object(n.b)()],d.prototype,"pageSize",void 0),l([Object(n.b)()],d.prototype,"province",void 0),l([Object(n.b)()],d.prototype,"vendor",void 0),l([Object(n.b)()],d.prototype,"query",void 0),l([Object(n.b)()],d.prototype,"sortField",void 0),l([Object(n.b)()],d.prototype,"sortOrder",void 0),d=l([Object(n.a)({mounted:function(){this.showFilters=window.outerWidth>=759}})],d),t.a=d}).call(this,r(58).setImmediate)},160:function(e,t,r){},168:function(e,t,r){"use strict";var n=r(160);r.n(n).a},170:function(e,t,r){"use strict";r.r(t);r(20);var n=r(2),o=r(159).a,l=(r(168),r(16)),d=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[r("div",{staticClass:"pure-form pure-form-stacked"},[r("div",{staticClass:"pure-g"},[r("div",{staticClass:"pure-u-1 pure-u-md-1-3",attrs:{id:"search"}},[r("label",{attrs:{for:"query"}},[e._v(e._s(e.$t("table.search")))]),e._v(" "),r("input",{staticClass:"pure-input-1",attrs:{id:"query",placeholder:"ie: Barnaul, surplus, 00 Buck",disabled:e.loading},domProps:{value:e.query},on:{change:function(t){return e.updateQuery(t.target.value)}}})]),e._v(" "),r("div",{staticClass:"pure-u-1 show-on-mobile"},[r("div",{staticClass:"active pure-button button-xsmall",on:{click:function(t){return e.toggleFilters()}}},[e._v("\n          "+e._s(e.$t(e.showFilters?"table.hideFilters":"table.showFilters"))+"\n          "),r("span",{staticClass:"arrow",class:{DES:!e.showFilters,ASC:e.showFilters}})])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.showFilters,expression:"showFilters"}],staticClass:"pure-u-1 pure-u-md-2-3"},[r("div",{staticClass:"pure-u-1 pure-u-md-1-4"},[r("label",{attrs:{for:"pageSize"}},[e._v(e._s(e.$t("table.pageSize")))]),e._v(" "),r("select",{staticClass:"pure-input-1",attrs:{id:"pageSize",disabled:e.loading},domProps:{value:e.pageSize},on:{change:function(t){return e.updatePageSize(t.target.value)}}},[r("option",[e._v("25")]),e._v(" "),r("option",[e._v("50")]),e._v(" "),r("option",[e._v("75")]),e._v(" "),r("option",[e._v("100")])])]),e._v(" "),r("div",{staticClass:"pure-u-1 pure-u-md-1-3"},[r("label",{attrs:{for:"province"}},[e._v(e._s(e.$t("table.province")))]),e._v(" "),r("select",{staticClass:"pure-input-1",attrs:{id:"province",disabled:e.loading},domProps:{value:e.province},on:{change:function(t){return e.updateProvince(t.target.value)}}},e._l(e.provinces,(function(t){return r("option",{key:t},[e._v(e._s(t))])})),0)]),e._v(" "),r("div",{staticClass:"pure-u-1 pure-u-md-1-3"},[r("label",{attrs:{for:"vendor"}},[e._v(e._s(e.$t("table.vendor")))]),e._v(" "),r("select",{staticClass:"pure-input-1",attrs:{id:"vendor",disabled:e.loading},domProps:{value:e.vendor},on:{change:function(t){return e.updateVendor(t.target.value)}}},e._l(e.vendors,(function(t){return r("option",{key:t},[e._v(e._s(t))])})),0)])])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.pages>0,expression:"pages > 0"}],staticClass:"pure-u-1 pure-u-md-1-3"},[r("label",[e._v(e._s(e.$t("table.page")))]),e._v(" "),r("div",[r("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:e.page<=1||e.loading},on:{click:function(t){return e.updatePage(1)}}},[e._v("|<<")]),e._v(" "),r("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:e.page<=1||e.loading},on:{click:function(t){return e.updatePage(e.page-1)}}},[e._v("\n          <\n        ")]),e._v("\n        "+e._s(e.page)+" "+e._s(e.$t("table.of"))+" "+e._s(e.pages)+"\n        "),r("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:e.page>=e.pages||e.loading},on:{click:function(t){return e.updatePage(e.page+1)}}},[e._v("\n          >\n        ")]),e._v(" "),r("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:e.page>=e.pages||e.loading},on:{click:function(t){return e.updatePage(e.pages)}}},[e._v("\n          >>|\n        ")])])])]),e._v(" "),r("div",{staticClass:"pure-g row"},[r("div",{staticClass:"pure-u-lg-1-5 pure-u-1"}),e._v(" "),r("div",{staticClass:"pure-u-lg-1-5 pure-u-md-1-3 pure-u-1-4 title",class:{active:"name"==e.sortField},attrs:{disabled:e.loading},on:{click:function(t){return e.sortBy("name")}}},[r("h4",[e._v("\n        "+e._s(e.$t("table.name"))+"\n        "),r("span",{staticClass:"arrow",class:e.sortOrder})])]),e._v(" "),r("div",{staticClass:"pure-u-lg-1-5 pure-u-md-1-3 pure-u-1-4 title",class:{active:"price"==e.sortField},attrs:{disabled:e.loading},on:{click:function(t){return e.sortBy("price")}}},[r("h4",[e._v("\n        "+e._s(e.$t("table.price"))+"\n        "),r("span",{staticClass:"arrow",class:e.sortOrder})])]),e._v(" "),r("div",{staticClass:"pure-u-lg-1-5 pure-u-1-4 title",class:{active:"unitCost"==e.sortField},attrs:{disabled:e.loading},on:{click:function(t){return e.sortBy("unitCost")}}},[r("h4",[e._v("\n        "+e._s(e.$t("table.unitCost"))+"\n        "),r("span",{staticClass:"arrow",class:e.sortOrder})])]),e._v(" "),r("div",{staticClass:"pure-u-lg-1-5 pure-u-1-4 title",class:{active:"link"==e.sortField},attrs:{disabled:e.loading},on:{click:function(t){return e.sortBy("link")}}},[r("h4",[e._v("\n        "+e._s(e.$t("table.link"))+"\n        "),r("span",{staticClass:"arrow",class:e.sortOrder})])])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!(e.loading||e.rows&&0!==e.rows.length),expression:"!loading && (!rows || rows.length === 0)"}],staticClass:"pure-g row fix-row"},[r("div",{staticClass:"pure-u-1"},[e._v(e._s(e.$t("table.noResult")))])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"pure-g row fix-row"},[r("div",{staticClass:"pure-u-1"},[e._v(e._s(e.$t("default.loading"))+"...")])]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}]},e._l(e.rows,(function(t,n){return r("div",{key:t.link+n,staticClass:"pure-g row fix-row item"},[r("div",{staticClass:"pure-u-lg-1-5 pure-u-md-1 pure-u-1"},[r("img",{directives:[{name:"img-fallback",rawName:"v-img-fallback",value:e.defaultImg,expression:"defaultImg"}],staticClass:"pure-img img-cell",attrs:{src:t.img||e.defaultImg,alt:t.name,decoding:"async",importance:"low"}})]),e._v(" "),r("div",{staticClass:"pure-u-lg-1-5 pure-u-md-1-4 pure-u-1 m-b-1 capitalize"},[e._v(e._s(t.name))]),e._v(" "),r("div",{staticClass:"pure-u-lg-1-5 pure-u-md-1-4 pure-u-1 m-b-1"},[r("div",[e._v("$"+e._s(t.price.toFixed(2)))])]),e._v(" "),r("div",{staticClass:"pure-u-lg-1-5 pure-u-md-1-4 pure-u-1 m-b-1"},[t.unitCost?r("div",[e._v("$"+e._s(t.unitCost.toFixed(2)))]):r("div",{attrs:{if:"!row.minUnitCost"}},[e._v("N/A")])]),e._v(" "),r("div",{staticClass:"pure-u-lg-1-5 pure-u-md-1-4 pure-u-1 m-b-1"},[r("a",{attrs:{href:t.link,target:"_blank",rel:"nofollow noopener"},on:{click:function(r){return e.itemClicked(t.link,n)}}},[e._v(e._s(e.$t("table.buyFrom"))+" "+e._s(t.vendor))])])])})),0),e._v(" "),r("div",[r("div",{directives:[{name:"show",rawName:"v-show",value:e.pages>0,expression:"pages > 0"}],staticClass:"pure-u-lg-1-2 pure-u-1"},[r("div",[e._v(e._s(e.$t("table.page")))]),e._v(" "),r("div",[r("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:1===e.page||e.loading},on:{click:function(t){return e.updatePage(1)}}},[e._v("\n          |<<\n        ")]),e._v(" "),r("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:1===e.page||e.loading},on:{click:function(t){return e.updatePage(e.page-1)}}},[e._v("\n          <\n        ")]),e._v("\n        "+e._s(e.page)+" "+e._s(e.$t("table.of"))+" "+e._s(e.pages)+"\n        "),r("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:e.page===e.pages||e.loading},on:{click:function(t){return e.updatePage(e.page+1)}}},[e._v("\n          >\n        ")]),e._v(" "),r("button",{staticClass:"pure-button button-xsmall",attrs:{disabled:e.page===e.pages||e.loading},on:{click:function(t){return e.updatePage(e.pages)}}},[e._v("\n          >>|\n        ")])])])])])}),[],!1,null,null,null).exports,c=r(59),v=r(155),m=(r(151),r(42)),h=function(e,t,r,desc){var n,o=arguments.length,l=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(l=(o<3?n(l):o>3?n(t,r,l):n(t,r))||l);return o>3&&l&&Object.defineProperty(t,r,l),l};function y(e,t){return f.apply(this,arguments)}function f(){return(f=Object(n.a)((function*(e,t){var{itemType:r,subType:n,page:o=1,pageSize:l=25,province:d=null,vendor:c=null,query:v=null,sortField:m=null,sortOrder:h=null}=t,y=yield e.post("https://ammobin.ca/api/graphql",[{opName:"getItemsFlatListings",query:"\n      query getItemsFlatListings(\n          $page: Int\n          $pageSize: Int\n          $itemType: ItemType\n          $subType: String\n          $province: Province\n          $vendor: String\n          $query: String\n          $sortField: FlatSortField\n          $sortOrder: SortOrder\n        ) {\n          itemsFlatListings(\n            page: $page\n            pageSize: $pageSize\n            itemType: $itemType\n            subType: $subType\n            province: $province\n            vendor: $vendor\n            sortField: $sortField\n            query: $query\n            sortOrder: $sortOrder\n          ) {\n            pages\n            items {\n              name\n              brand\n              img\n              price\n              link\n              unitCost\n              vendor\n            }\n          }\n        }\n      ",variables:{itemType:r,subType:n,page:o,pageSize:l,province:d,vendor:c,query:v,sortField:m,sortOrder:h}}]),{data:{itemsFlatListings:f,errors:_}}=y.data[0];return f}))).apply(this,arguments)}var _=class extends m.c{constructor(){super(...arguments),this.error=null,this.itemsFlatListings=null,this.loading=!1,this.page=1,this.province=null,this.pageSize=25,this.vendor=null,this.query=null,this.sortOrder="DES",this.sortField="price"}get area(){return this.province||"Canada"}get isAmmoType(){return v.a.includes(this.itemType)}get subType(){return this.$route.params.subType}get itemType(){return this.$route.params.itemType}onQueryChange(e){var t=this;return Object(n.a)((function*(){try{t.loading=!0,t.itemsFlatListings=yield y(t.$axios,t),t.page>t.itemsFlatListings.pages&&(t.page=t.itemsFlatListings.pages||1),t.loading=!1}catch(e){t.error=e}}))()}};h([Object(m.d)("page"),Object(m.d)("province"),Object(m.d)("pageSize"),Object(m.d)("vendor"),Object(m.d)("query"),Object(m.d)("sortOrder"),Object(m.d)("sortField")],_.prototype,"onQueryChange",null);var w=_=h([Object(m.a)({validate(e){var{params:t}=e;return v.b.includes(t.itemType)},asyncData:e=>Object(n.a)((function*(){var{$axios:t,route:{params:{itemType:r,subType:n}}}=e,[o,l]=yield Promise.all([y(t,{itemType:r,subType:n}),t.post("https://ammobin.ca/api/graphql",[{query:"{vendors{name}}",opName:"vendors"}]).then(e=>e.data[0].data.vendors)]);return{vendors:l,itemsFlatListings:o}}))(),components:{FlatList:d},head(){var link=[],e="https://ammobin.ca/".concat(this.$i18n.locale,"/").concat(this.itemType,"/").concat(this.subType);this.page>1&&link.push({rel:"prev",href:Object(c.a)(e,this.page-1,this.subType)}),this.itemsFlatListings&&this.itemsFlatListings.pages>this.page&&link.push({rel:"next",href:Object(c.a)(e,this.page+1,this.subType)});var area=this.area,t=this.subType;return{title:this.$t("subType.title",{area:area,subType:t})+" | ammobin.ca",meta:[{hid:"description",name:"description",content:this.$t("subType.description",{area:area,subType:t})}],link:link}}})],_),C=Object(l.a)(w,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[e.isAmmoType?e._e():r("div",[e._v(e._s(e.$t("default.betaWarning")))]),e._v(" "),r("h1",[e._v(e._s(e.$t("subType.title",{area:e.area,subType:e.subType})))]),e._v(" "),r("flat-list",{directives:[{name:"show",rawName:"v-show",value:!e.error,expression:"!error"}],attrs:{rows:e.itemsFlatListings?e.itemsFlatListings.items:[],pages:e.itemsFlatListings?e.itemsFlatListings.pages:0,"item-type":e.itemType,subType:e.subType,vendors:[null].concat((e.vendors||[]).map((function(i){return i.name}))),loading:!e.itemsFlatListings||e.loading,page:e.page,pageSize:e.pageSize,province:e.province,vendor:e.vendor,query:e.query,sortField:e.sortField,sortOrder:e.sortOrder},on:{"update:page":function(t){e.page=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"update:province":function(t){e.province=t},"update:vendor":function(t){e.vendor=t},"update:query":function(t){e.query=t},"update:sortField":function(t){e.sortField=t},"update:sort-field":function(t){e.sortField=t},"update:sortOrder":function(t){e.sortOrder=t},"update:sort-order":function(t){e.sortOrder=t}}}),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}]},[e._v("ERROR "+e._s(e.error))])],1)}),[],!1,null,null,null);t.default=C.exports}}]);